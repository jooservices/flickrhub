# =========================
# Flickr credentials (only needed if you want API to fetch authorize URL)
# =========================
# If youâ€™re using the setup script to drive the OAuth flow, you can leave these blank
# and provide them interactively. Otherwise, set your Flickr App Garden credentials here.
FLICKR_API_KEY=
FLICKR_API_SECRET=

# =========================
# Core services (Docker defaults; internal networking)
# =========================
REDIS_URL=redis://redis:6379                 # Redis for cache/pacing
RABBIT_URL=amqp://rabbit:5672                # RabbitMQ for jobs
MONGO_URL=mongodb://mongo:27017/flickrhub    # Mongo for tokens/jobs

# =========================
# Flickr endpoints (keep defaults unless overriding)
# =========================
FLICKR_REST_URL=https://www.flickr.com/services/rest/
FLICKR_UPLOAD_URL=https://up.flickr.com/services/upload/
FLICKR_REPLACE_URL=https://up.flickr.com/services/replace/

# =========================
# Observability (mandatory; logs always sent)
# =========================
OBS_API_URL=http://observability.jooservices.com/api/v1/logs   # OBS ingest URL
OBS_API_KEY=                                                   # REQUIRED: your OBS API key
SERVICE_NAME=flickrhub-worker                                  # Service label in OBS
SERVICE_ENV=local                                              # Environment label (e.g., local, dev, staging, prod)
OBS_DEBUG=false                                                # true to print OBS request/response

# =========================
# Jobs & persistence
# =========================
JOB_RETRY_ATTEMPTS=3
JOB_TTL_COMPLETE=0        # seconds; 0 = keep in queue backend
JOB_TTL_FAIL=0            # seconds; 0 = keep in queue backend
JOB_TTL_COMPLETE_DAYS=0   # Mongo TTL for completed docs (0 = keep)
JOB_TTL_FAIL_DAYS=0       # Mongo TTL for failed docs (0 = keep)
SAVE_COMPLETED_TO_MONGO=true   # Persist successful jobs to Mongo (set false to skip)
SAVE_FAILED_TO_MONGO=true      # Persist failed jobs to Mongo

# =========================
# Cache / mock
# =========================
MOCK_FLICKR=false                  # true = no real Flickr calls (use mock client)
CACHE_ENABLED=true
CACHE_TTL_SECONDS=300
CACHE_PREFIX=flickrhub:cache:

# =========================
# Callbacks (for webhook delivery)
# =========================
CALLBACK_ENABLED=true
CALLBACK_RETRY_ATTEMPTS=3
CALLBACK_RETRY_DELAY_MS=1000       # ms between callback retries

# =========================
# Rate limits (internal pacing; API does not reject)
# =========================
FLICKR_RATE_LIMIT_PER_HOUR=2900
FLICKR_RATE_LIMIT_PER_SECOND=1
RATE_LIMIT_PREFIX=flickrhub:ratelimit:
RATE_LIMIT_SECOND_PREFIX=flickrhub:ratelimit:sec:

# =========================
# Worker scaling (PM2)
# =========================
WORKER_REST_INSTANCES=5        # PM2 processes for REST queue
WORKER_UPLOAD_INSTANCES=5      # PM2 processes for upload queue
WORKER_REPLACE_INSTANCES=5     # PM2 processes for replace queue
WORKER_CONCURRENCY=1           # Default jobs per process (fallback)
WORKER_REST_CONCURRENCY=1      # Jobs per process for REST queue
WORKER_UPLOAD_CONCURRENCY=1    # Jobs per process for upload queue
WORKER_REPLACE_CONCURRENCY=1   # Jobs per process for replace queue

# =========================
# OAuth mode
# =========================
OAUTH_MODE=oob       # oob (default) or callback
CALLBACK_URL=        # Required if OAUTH_MODE=callback; not needed for oob

# =========================
# UI/API base (used by static web UI)
# =========================
API_BASE=            # e.g., http://localhost:3000
