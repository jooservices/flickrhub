# =========================
# REQUIRED: Flickr creds
# =========================
FLICKR_API_KEY=your_key               # REQUIRED: from Flickr App Garden
FLICKR_API_SECRET=your_secret         # REQUIRED: from Flickr App Garden

# =========================
# Core services (Docker defaults)
# =========================
REDIS_URL=redis://redis:6379          # REQUIRED: Redis (cache/pacing)
RABBIT_URL=amqp://rabbit:5672         # REQUIRED: RabbitMQ (jobs)
MONGO_URL=mongodb://mongo:27017/flickrhub   # REQUIRED: Mongo (tokens/jobs)

# =========================
# Flickr endpoints (keep defaults unless overriding)
# =========================
FLICKR_REST_URL=https://www.flickr.com/services/rest/
FLICKR_UPLOAD_URL=https://up.flickr.com/services/upload/
FLICKR_REPLACE_URL=https://up.flickr.com/services/replace/

# =========================
# Observability (set key or disable upstream)
# =========================
OBS_API_URL=http://observability.jooservices.com/api/v1/logs   # REQUIRED if sending OBS
OBS_API_KEY=your_obs_key                                      # REQUIRED if sending OBS
SERVICE_NAME=flickrhub-worker
SERVICE_ENV=local
OBS_DEBUG=false                                               # true to log OBS payloads

# =========================
# Jobs & persistence
# =========================
JOB_RETRY_ATTEMPTS=3
JOB_TTL_COMPLETE=0        # seconds; 0 = keep in queue backend
JOB_TTL_FAIL=0            # seconds; 0 = keep in queue backend
JOB_TTL_COMPLETE_DAYS=0   # Mongo TTL for completed docs (0 = keep)
JOB_TTL_FAIL_DAYS=0       # Mongo TTL for failed docs (0 = keep)
SAVE_COMPLETED_TO_MONGO=true
SAVE_FAILED_TO_MONGO=true

# =========================
# Cache / mock
# =========================
MOCK_FLICKR=false                  # true = no real Flickr calls
CACHE_ENABLED=true
CACHE_TTL_SECONDS=300
CACHE_PREFIX=flickrhub:cache:

# =========================
# Callbacks
# =========================
CALLBACK_ENABLED=true
CALLBACK_RETRY_ATTEMPTS=3
CALLBACK_RETRY_DELAY_MS=1000

# =========================
# Rate limits (internal pacing; API never rejects)
# =========================
FLICKR_RATE_LIMIT_PER_HOUR=2900
FLICKR_RATE_LIMIT_PER_SECOND=1
RATE_LIMIT_PREFIX=flickrhub:ratelimit:
RATE_LIMIT_SECOND_PREFIX=flickrhub:ratelimit:sec:

# =========================
# Worker scaling (PM2)
# =========================
WORKER_REST_INSTANCES=5
WORKER_UPLOAD_INSTANCES=5
WORKER_REPLACE_INSTANCES=5
WORKER_CONCURRENCY=1
WORKER_REST_CONCURRENCY=1
WORKER_UPLOAD_CONCURRENCY=1
WORKER_REPLACE_CONCURRENCY=1

# =========================
# OAuth mode
# =========================
OAUTH_MODE=oob       # oob (default) or callback
CALLBACK_URL=        # REQUIRED if OAUTH_MODE=callback

# =========================
# UI/API base (used by static web UI)
# =========================
API_BASE=            # e.g., http://localhost:3000
